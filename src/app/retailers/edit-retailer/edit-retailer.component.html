<form [formGroup]="editRetailerForm" (ngSubmit)="onUpdateRetailer()">
  <div class="modal-header">
    <h4 class="modal-title">Edit Retailer</h4>
  </div>
  <div class="modal-body">
    <div class="row">
      <div class="col-md-4">
        <div class="form-group">
          <label for="projectinput1">Name</label>
          <div class="input-group">
            <input type="text" class="form-control" formControlName="name" placeholder="Name"
              aria-describedby="basic-addon3">
          </div>
          <div
            *ngIf="editRetailerForm.controls['name'].hasError('required') && (editRetailerForm.controls['name'].dirty || editRetailerForm.controls['name'].touched)"
            class="error">
            Please enter a name
          </div>
          <div *ngIf="editRetailerForm.controls['name'].hasError('pattern')" class="error">
            Please enter a valid name
          </div>
        </div>

        <div class="form-group">
          <label for="projectinput1">GSTIN</label>
          <div class="input-group" formGroupName="retailerDetails">
            <input type="text" class="form-control" formControlName="gstin" placeholder="GSTIN"
              aria-describedby="basic-addon3" (keyup)="onGstKeyUp($event)">
          </div>
          <div
            *ngIf="editRetailerForm.controls['retailerDetails']['controls']['gstin'].hasError('required') && (editRetailerForm.controls['retailerDetails']['controls']['gstin'].dirty || editRetailerForm.controls['retailerDetails']['controls']['gstin'].touched)"
            class="error">
            Please enter GSTIN
          </div>
          <div *ngIf="editRetailerForm.controls['retailerDetails']['controls']['gstin'].hasError('pattern')"
            class="error">
            Please enter a valid GSTIN
          </div>
        </div>
        <div class="form-group">
          <label for="projectinput1">Deals In</label>
          <div class="input-group" formGroupName="retailerDetails">
            <!-- <select name="type" class="form-control" formControlName="dealsIn" aria-describedby="basic-addon3" multiple>
              <option *ngFor="let category of categories" [value]="category">
                {{category.name}}</option>
            </select> -->
            <p-multiSelect [options]="categories" formControlName="dealsIn" optionLabel="name"></p-multiSelect>
          </div>
          <div
            *ngIf="editRetailerForm.controls['retailerDetails']['controls']['dealsIn'].hasError('required') && (editRetailerForm.controls['retailerDetails']['controls']['dealsIn'].dirty || editRetailerForm.controls['retailerDetails']['controls']['dealsIn'].touched)"
            class="error">
            Please enter deals in
          </div>
        </div>
        <div class="form-group">
          <label for="projectinput1">Shop Name</label>
          <div class="input-group" formGroupName="retailerDetails">
            <input type="text" class="form-control" formControlName="shopName" placeholder="Shop Name"
              aria-describedby="basic-addon3">
          </div>
          <div
            *ngIf="editRetailerForm.controls['retailerDetails']['controls']['shopName'].hasError('required') && (editRetailerForm.controls['retailerDetails']['controls']['shopName'].dirty || editRetailerForm.controls['retailerDetails']['controls']['shopName'].touched)"
            class="error">
            Please enter a shop name
          </div>
        </div>
        <div class="form-group">
          <label class="form-input-label">Tags</label>
          <p-autoComplete [suggestions]="tags$ | async" (completeMethod)="searchTags($event)" formControlName="tags"
            field="name" [multiple]="true" emptyMessage="No tags found!" placeholder="Enter tag name">
          </p-autoComplete>
        </div>
        <!-- <div class="form-group">
          <label class="form-input-label">Cancellation Policy</label>
          <div class="input-group" formGroupName="policy">
            <p-editor placeholder="Cancellation Policy" formControlName="policy" [style]="{'height':'240px'}">
            </p-editor>
          </div>
        </div> -->
        <div class="form-group">
          <label class="form-input-label">Return / Refund Policy</label>
          <div class="input-group" formGroupName="policy">
            <p-toggleButton class="orange-button" onLabel="2 days" offLabel="7 days" formControlName="isTwoDay">
            </p-toggleButton>
          </div>
        </div>
      </div>
      <div class="col-md-8">
        <div class="row">
          <div class="col-md-6">
            <div class="form-group">
              <label for="projectinput1">Email</label>
              <div class="input-group">
                <input type="text" class="form-control" formControlName="email" placeholder="Email"
                  aria-describedby="basic-addon3">
              </div>
              <div
                *ngIf="editRetailerForm.controls['email'].hasError('required') && (editRetailerForm.controls['email'].dirty || editRetailerForm.controls['email'].touched)"
                class="error">
                Please enter a email id
              </div>
              <div *ngIf="editRetailerForm.controls['email'].hasError('email')" class="error">
                Please enter a valid email id
              </div>
            </div>
          </div>
          <div class="col-md-6">
            <div class="form-group">
              <label for="projectinput1">Mobile Number</label>
              <div class="input-group">
                <input type="number" class="form-control" formControlName="mobileNumber" placeholder="Mobile Number"
                  aria-describedby="basic-addon3" disabled>
              </div>
              <div
                *ngIf="editRetailerForm.controls['mobileNumber'].hasError('required') && (editRetailerForm.controls['mobileNumber'].dirty || editRetailerForm.controls['mobileNumber'].touched)"
                class="error">
                Please enter a mobile number
              </div>
              <div *ngIf="editRetailerForm.controls['mobileNumber'].hasError('pattern')" class="error">
                Please enter a valid mobile number
              </div>
            </div>
          </div>
        </div>
        <div class="row">
          <div class="col-md-6">

            <div class="form-group">
              <label for="projectinput1" formGroupName="retailerDetails">PAN Number</label>
              <div class="input-group" formGroupName="retailerDetails">
                <input type="text" class="form-control" formControlName="panNumber" placeholder="PAN Number"
                  aria-describedby="basic-addon3">
              </div>
              <div
                *ngIf="editRetailerForm.controls['retailerDetails']['controls']['panNumber'].hasError('required') && (editRetailerForm.controls['retailerDetails']['controls']['panNumber'].dirty || editRetailerForm.controls['retailerDetails']['controls']['panNumber'].touched)"
                class="error">
                Please enter pan number
              </div>
              <div *ngIf="editRetailerForm.controls['retailerDetails']['controls']['panNumber'].hasError('pattern')"
                class="error">
                Please enter a valid PAN Number
              </div>
            </div>
          </div>
          <div class="col-md-6">
            <div class="row">
              <div class="col-md-6">
                <div class="form-group">
                  <label for="projectinput1">Is Composite</label>
                  <div class="input-group" formGroupName="retailerDetails">
                    <input type="checkbox" formControlName="isComposite">
                  </div>
                  <div
                    *ngIf="editRetailerForm.controls['retailerDetails']['controls']['isComposite'].hasError('required') && (editRetailerForm.controls['retailerDetails']['controls']['isComposite'].dirty || editRetailerForm.controls['retailerDetails']['controls']['isComposite'].touched)"
                    class="error">
                    Please select if opted for composite
                  </div>
                </div>
              </div>
              <div class="col-md-6">
                <div class="form-group">
                  <label for="projectinput1">Is Gst Exempted</label>
                  <div class="input-group" formGroupName="retailerDetails">
                    <input type="checkbox" formControlName="isGstExempted" (change)="ifChecked($event)">
                  </div>
                  <div
                    *ngIf="editRetailerForm.controls['retailerDetails']['controls']['isGstExempted'].hasError('required') && (editRetailerForm.controls['retailerDetails']['controls']['isGstExempted'].dirty || editRetailerForm.controls['retailerDetails']['controls']['isGstExempted'].touched)"
                    class="error">
                    Please select if opted for composite
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div class="row" formArrayName="address">
          <div class="col-md-12">
            <div class="form-group">
              <label for="projectinput1">Address Line 1</label>
              <div class="input-group" formGroupName="0">
                <input type="text" class="form-control" formControlName="addressLine1"
                  placeholder="Apartment/house/flat number/Building floor" aria-describedby="basic-addon3">
              </div>
              <div
                *ngIf="editRetailerForm.controls['address']['controls'][0]['controls']['addressLine1'].hasError('required') && (editRetailerForm.controls['address']['controls'][0]['controls']['addressLine1'].dirty || editRetailerForm.controls['address']['controls'][0]['controls']['addressLine1'].touched)"
                class="error">
                Please enter address
              </div>
            </div>
          </div>
        </div>
        <div class="row" formArrayName="address">
          <div class="col-md-12">
            <div class="form-group">
              <label for="projectinput1">Address Line 2</label>
              <div class="input-group" formGroupName="0">
                <input type="text" class="form-control" formControlName="addressLine2"
                  placeholder="Street address, P.O. box, company name" aria-describedby="basic-addon3">
              </div>
            </div>
          </div>
        </div>
        <div class="row" formArrayName="address">
          <div class="col-md-12">
            <div class="form-group">
              <label for="projectinput1">Landmark</label>
              <div class="input-group" formGroupName="0">
                <input type="text" class="form-control" formControlName="landmark" placeholder="Landmark"
                  aria-describedby="basic-addon3">
              </div>
            </div>
          </div>
        </div>
        <div class="row" formArrayName="address">
          <div class="col-md-12">
            <div class="form-group">
              <label for="projectinput1">City</label>
              <div class="input-group" formGroupName="0">
                <input type="text" class="form-control" formControlName="city" placeholder="City"
                  aria-describedby="basic-addon3">
              </div>
              <div
                *ngIf="editRetailerForm.controls['address']['controls'][0]['controls']['city'].hasError('required') && (editRetailerForm.controls['address']['controls'][0]['controls']['city'].dirty || editRetailerForm.controls['address']['controls'][0]['controls']['city'].touched)"
                class="error">
                Please enter city
              </div>
            </div>
          </div>
        </div>
        <div class="row" formArrayName="address">
          <div class="col-md-12">
            <div class="form-group">
              <label for="projectinput1">State</label>
              <div class="input-group" formGroupName="0">
                <input type="text" class="form-control" formControlName="state" placeholder="State"
                  aria-describedby="basic-addon3">
              </div>
              <div
                *ngIf="editRetailerForm.controls['address']['controls'][0]['controls']['state'].hasError('required') && (editRetailerForm.controls['address']['controls'][0]['controls']['state'].dirty || editRetailerForm.controls['address']['controls'][0]['controls']['state'].touched)"
                class="error">
                Please enter state
              </div>
            </div>
          </div>
        </div>
        <div class="row" formArrayName="address">
          <div class="col-md-12">
            <div class="form-group">
              <label for="projectinput1">Postal Code</label>
              <div class="input-group" formGroupName="0">
                <input type="number" class="form-control" formControlName="postalCode" placeholder="Postal Code"
                  aria-describedby="basic-addon3">
              </div>
              <div
                *ngIf="editRetailerForm.controls['address']['controls'][0]['controls']['postalCode'].hasError('required') && (editRetailerForm.controls['address']['controls'][0]['controls']['postalCode'].dirty || editRetailerForm.controls['address']['controls'][0]['controls']['postalCode'].touched)"
                class="error">
                Please enter postal code
              </div>
              <div
                *ngIf="editRetailerForm.controls['address']['controls'][0]['controls']['postalCode'].hasError('pattern')"
                class="error">
                Please enter a valid postal code
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <!-- </div> -->

  <div class="modal-footer">
    <button type="submit" [disabled]="!editRetailerForm.valid" class="btn btn-primary btn-raised">
      <i class="fa fa-check-square-o"></i>Update Retailer</button>
  </div>
</form>
